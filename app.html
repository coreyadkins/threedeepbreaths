
<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Hello World</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
	<script src="https://unpkg.com/react@latest/dist/react.js"></script>
	<script src="https://unpkg.com/react-dom@latest/dist/react-dom.js"></script>
	<script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
	<style>
		body {
			margin: 0;
		}

		.breath-countdown {
			background: #eee;
			font-size: 30vh;
			display: flex;
			align-items: center;
			height: 100vh;
			justify-content: space-around;
		}

		.counter {
			transition: all 2s linear;
			/*transition: all 8s;*/
			/*transition: all 2s;*/
		}

		.counter.fading-out {
			opacity: 0;
		}

	</style>
</head>
<body>
	<div id="app"></div>
	<script type="text/babel">
	var ThreeDeepBreaths = React.createClass({
		getInitialState: function() {
			return {
				seconds: 0,
				breathDuration: 8,
				breathCount: 3
			};
		},

		componentDidMount: function() {
			setInterval(function() {
				this.setState({
					seconds: this.state.seconds + 1
				});
			}.bind(this),1000);
		}, 

		componentWillUnmount: function() {
			this.serverRequest.abort();
		},

		printBreath: function() {
			return 1 + Math.floor( this.state.seconds / this.state.breathDuration );
		},

		counterClass: function() {
			var addClass = '';
			if( this.state.seconds % this.state.breathDuration >= this.state.breathDuration * .75 ) {
				addClass = ' fading-out';
			}

			return 'counter' + addClass;
		},

		render: function() {
			if( this.state.seconds < this.state.breathDuration * this.state.breathCount ) {
				return (
					<div className="breath-countdown">
						<div className={ this.counterClass() }>{ this.printBreath() }</div>
					</div>
				);
			} else {
				return (
					<div className="breath-countdown">
						<Content content="ayy" />
					</div>
				);
			}
		}
	});

	var Content = React.createClass({
		render: function(){
				return (
						<div className="content">{this.props.content}</div>
				);
		}
	});
	 
	ReactDOM.render(
		<ThreeDeepBreaths />,
	document.getElementById('app')
	);
	</script>

</body>
</html>
